@IF /I NOT "%~1" == "KEEP" IF EXIST bld RMDIR /S /Q bld
cmake -Bbld .

@ECHO.
@ECHO.
@ECHO.

@PUSHD bld
@FOR %%X IN (msbuild.exe) DO @IF NOT "%%~$PATH:X" == "" @CALL :msvc
@POPD

@GOTO:EOF



:msvc
@ECHO. ------------------------------------------------------------------------------
@ECHO. ------------------------------------------------------------------------------
@ECHO. -------- building Debug ------------------------------------------------------
@ECHO. ------------------------------------------------------------------------------
@ECHO. ------------------------------------------------------------------------------
@ECHO.
msbuild gravity.sln /p:Configuration=Debug

@ECHO.
@ECHO.
@ECHO.

@ECHO. ------------------------------------------------------------------------------
@ECHO. ------------------------------------------------------------------------------
@ECHO. -------- building Release ----------------------------------------------------
@ECHO. ------------------------------------------------------------------------------
@ECHO. ------------------------------------------------------------------------------
msbuild gravity.sln /p:Configuration=Release
